(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&m(u)}).observe(document,{childList:!0,subtree:!0});function p(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(o){if(o.ep)return;o.ep=!0;const i=p(o);fetch(o.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const y=document.getElementById("page-title"),d=document.getElementById("page-description"),p=document.getElementById("verb-groups-container"),m=document.getElementById("top-verbs-list"),o=document.getElementById("total-patterns"),i=document.getElementById("most-common-pattern"),u=document.getElementById("most-irregular"),x=document.getElementById("easiest-to-learn"),L=document.getElementById("summary-notes"),b=document.getElementById("verb-search"),c=document.getElementById("search-results"),g=document.getElementById("search-results-list");let f=[];function E(e){if(!e){c.classList.add("hidden"),g.innerHTML="";return}const n=f.filter(t=>t.infinitive.toLowerCase().includes(e.toLowerCase())||t.verbes_du_type.toLowerCase().includes(e.toLowerCase()));if(n.length===0){c.classList.add("hidden"),g.innerHTML="";return}c.classList.remove("hidden"),g.innerHTML=n.map(t=>`
            <li class="p-2 hover:bg-gray-100 cursor-pointer" data-infinitive="${t.infinitive}">
                ${t.infinitive}
            </li>
        `).join(""),g.querySelectorAll("li").forEach(t=>{t.addEventListener("click",s=>{const r=s.currentTarget.dataset.infinitive,a=_(r),h=a.querySelector(`#${r}`);if(a){const v=a.closest(".group-box").querySelector("[aria-expanded]");v.getAttribute("aria-expanded")==="false"&&v.click(),h&&h.scrollIntoView({behavior:"smooth",block:"center"})}c.classList.add("hidden")})})}function _(e){const n=document.querySelectorAll(".group-box");for(const t of n){const s=t.querySelectorAll("h3");for(const r of s)if(r&&r.textContent===e)return t}return null}b.addEventListener("input",e=>{E(e.target.value)}),document.addEventListener("click",e=>{!c.contains(e.target)&&!b.contains(e.target)&&c.classList.add("hidden")});function w(e){f=[];for(const n in e.conjugation_groups){const t=e.conjugation_groups[n];f.push(...t.verbs)}}function $(e){const n=new Set;if(!e||!e.conjugation_groups||typeof e.conjugation_groups!="object")return console.warn("Warning: 'conjugation_groups' not found or not an object in the JSON data."),[];for(const t in e.conjugation_groups)if(Object.prototype.hasOwnProperty.call(e.conjugation_groups,t)){const s=e.conjugation_groups[t];s&&s.verbs&&Array.isArray(s.verbs)?s.verbs.forEach(r=>{if(r&&r.infinitive&&typeof r.infinitive=="string"&&n.add(r.infinitive.trim()),r&&r.verbes_du_type&&typeof r.verbes_du_type=="string"){const a=r.verbes_du_type.trim();a.length>0&&a.split(",").map(l=>l.trim()).filter(l=>l.length>0).forEach(l=>{n.add(l)})}}):console.warn(`Warning: Verbs array missing or malformed in group '${t}'.`)}return n.size}async function C(){try{const n=await(await fetch("french_verbes_3m-gr.json")).json();n.metadata.total_verbs=$(n),j(n)}catch(e){console.error("Erreur lors du chargement des données :",e),p.innerHTML='<p class="text-red-600 text-center text-xl">Erreur lors du chargement des données</p>'}}function j(e){y.textContent=e.metadata.title,d.textContent=e.metadata.description+`: (total ${e.metadata.total_verbs} verbes )`,w(e);for(const t in e.conjugation_groups){const s=e.conjugation_groups[t],r=I(s);p.appendChild(r)}e.frequency_analysis.top_10_most_frequent.forEach(t=>{const s=document.createElement("li");s.className="flex items-center space-x-2 text-gray-700",s.innerHTML=`
                <span class="font-semibold text-indigo-700">${t.rank}. ${t.infinitive}</span>
                <!--<span class="text-gray-500">(${t.translation})</span>-->
                <span class="text-sm text-gray-400">— ${t.frequency_note}</span>
            `,m.appendChild(s)});const n=e.conjugation_patterns_summary;o.innerHTML=`<span class="font-semibold">Nombre total de modèles :</span> ${n.total_patterns}`,i.innerHTML=`<span class="font-semibold">Le plus courant :</span> ${n.most_common_pattern}`,u.innerHTML=`<span class="font-semibold">Les plus irréguliers :</span> ${n.most_irregular}`,x.innerHTML=`<span class="font-semibold">Les plus faciles à apprendre :</span> ${n.easiest_to_learn}`,n.notes.forEach(t=>{const s=document.createElement("li");s.textContent=t,s.className="text-gray-700",L.appendChild(s)})}function I(e){const n=document.createElement("div");n.className="group-box bg-gradient-to-r from-indigo-600 to-purple-600 text-white cursor-pointer rounded-xl shadow-lg border border-gray-200 overflow-x-hidden";const t=document.createElement("div");t.className="w-full p-4 text-left flex justify-between items-center text-white font-bold text-xl rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75",t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls",`content-${e.name.replace(/\s+/g,"-")}`),t.innerHTML=`
            <div>
                <h2 class="md:text-2xl text-sm">${e.name}</h2>
                <p class="text-base font-normal opacity-90">${e.pattern}</p>
                <span class="text-sm font-normal opacity-80">${e.verbs.length} verbes</span>
            </div>
            <svg class="w-6 h-6 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        `;const s=document.createElement("div");return s.id=`content-${e.name.replace(/\s+/g,"-")}`,s.className="max-h-0 opacity-0 overflow-x-hidden transition-all duration-500 ease-in-out",e.verbs.forEach(r=>{const a=B(r);s.appendChild(a)}),t.addEventListener("click",()=>{const r=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!r),t.querySelector("svg").classList.toggle("rotate-180",!r),r?(s.classList.remove("max-h-none","opacity-100"),s.classList.add("max-h-0","opacity-0"),s.style.padding="0"):(s.classList.remove("max-h-0","opacity-0"),s.classList.add("max-h-none","opacity-100"),s.style.padding="1.5rem")}),n.appendChild(t),n.appendChild(s),n}function B(e){const n=document.createElement("div");return n.id=e.infinitive,n.className="bg-white rounded-lg p-4 shadow-sm border border-gray-100 mb-4 last:mb-0",n.setAttribute("data-infinitive",e.infinitive),n.innerHTML=`
            <div class="flex justify-between items-start mb-2">
                <h3 class="text-lg font-semibold text-gray-800">${e.infinitive}</h3>
                <span class="text-sm text-gray-500">${e.verbes_du_type||""}</span>
            </div>
            <div class="space-y-2">
                <div class="space-y-1">
                    <h4 class="text-sm font-medium text-gray-600">Présent</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                        ${Object.entries(e.present_tense).map(([t,s])=>`
                            <div class="text-sm text-gray-700">
                                <span class="font-medium">${t}</span>
                                <span class="text-gray-500">:</span>
                                <span class="ml-1">${s}</span>
                            </div>
                        `).join("")}
                    </div>
                </div>
            </div>
        `,n}C()});
