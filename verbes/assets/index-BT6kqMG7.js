(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&g(m)}).observe(document,{childList:!0,subtree:!0});function f(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function g(o){if(o.ep)return;o.ep=!0;const i=f(o);fetch(o.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const b=document.getElementById("page-title"),p=document.getElementById("page-description"),f=document.getElementById("verb-groups-container"),g=document.getElementById("top-verbs-list"),o=document.getElementById("total-patterns"),i=document.getElementById("most-common-pattern"),m=document.getElementById("most-irregular"),_=document.getElementById("easiest-to-learn"),L=document.getElementById("summary-notes"),x=document.getElementById("verb-search"),d=document.getElementById("search-results"),h=document.getElementById("search-results-list");let y=[];function w(t){if(t.length<3){d.classList.add("hidden"),h.innerHTML="";return}const n=y.filter(e=>{const r=e.infinitive.toLowerCase().includes(t.toLowerCase()),l=e.verbes_du_type&&e.verbes_du_type.toLowerCase().includes(t.toLowerCase());if(r||l){if(e.verbes_du_type){const c=e.verbes_du_type.toLowerCase().split(",").map(u=>u.trim()).filter(u=>u.length>0).find(u=>u.includes(t.toLowerCase()));c&&(e.matched_verb=c)}return!0}return!1});if(n.length===0){d.classList.add("hidden"),h.innerHTML="";return}const s=n.find(e=>e.verbes_du_type?e.verbes_du_type.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a.length>0).find(a=>a.includes(t.toLowerCase()))!==void 0:!1);s&&s.verbes_du_type.toLowerCase().split(",").map(e=>e.trim()).find(e=>e.includes(t.toLowerCase())),d.classList.remove("hidden"),h.innerHTML=n.map(e=>`
            <li class="p-2 hover:bg-gray-100 cursor-pointer" data-infinitive="${e.infinitive}">
                <strong>${e.infinitive}</strong>
                ${e.matched_verb?`<span class="text-sm text-blue-500 italic">(matched: <span class="font-bold">${e.matched_verb}</span>)</span>`:e.verbes_du_type?`<span class="text-sm text-gray-500">(${e.verbes_du_type})</span>`:""}
            </li>
        `).join(""),h.querySelectorAll("li").forEach(e=>{e.addEventListener("click",r=>{const l=r.currentTarget.dataset.infinitive,a=E(l),c=a.querySelector(`#${l}`);if(a){const v=a.closest(".group-box").querySelector("[aria-expanded]");v.getAttribute("aria-expanded")==="false"&&v.click(),c&&c.scrollIntoView({behavior:"smooth",block:"center"})}d.classList.add("hidden")})})}function E(t){const n=document.querySelectorAll(".group-box");for(const s of n){const e=s.querySelectorAll("h3");for(const r of e)if(r&&r.textContent===t)return s}return null}x.addEventListener("input",t=>{w(t.target.value)}),document.addEventListener("click",t=>{!d.contains(t.target)&&!x.contains(t.target)&&d.classList.add("hidden")});function $(t){y=[];for(const n in t.conjugation_groups){const s=t.conjugation_groups[n];y.push(...s.verbs)}}function C(t){const n=new Set;if(!t||!t.conjugation_groups||typeof t.conjugation_groups!="object")return console.warn("Warning: 'conjugation_groups' not found or not an object in the JSON data."),[];for(const s in t.conjugation_groups)if(Object.prototype.hasOwnProperty.call(t.conjugation_groups,s)){const e=t.conjugation_groups[s];e&&e.verbs&&Array.isArray(e.verbs)?e.verbs.forEach(r=>{if(r&&r.infinitive&&typeof r.infinitive=="string"&&n.add(r.infinitive.trim()),r&&r.verbes_du_type&&typeof r.verbes_du_type=="string"){const l=r.verbes_du_type.trim();l.length>0&&l.split(",").map(c=>c.trim()).filter(c=>c.length>0).forEach(c=>{n.add(c)})}}):console.warn(`Warning: Verbs array missing or malformed in group '${s}'.`)}return n.size}async function V(){try{const n=await(await fetch("french_verbes_3m-gr.json")).json();n.metadata.total_verbs=C(n),j(n)}catch(t){console.error("Erreur lors du chargement des données :",t),f.innerHTML='<p class="text-red-600 text-center text-xl">Erreur lors du chargement des données</p>'}}function j(t){b.textContent=t.metadata.title,p.textContent=t.metadata.description+`: (total ${t.metadata.total_verbs} verbes )`,$(t);for(const s in t.conjugation_groups){const e=t.conjugation_groups[s],r=I(e);f.appendChild(r)}t.frequency_analysis.top_10_most_frequent.forEach(s=>{const e=document.createElement("li");e.className="flex items-center space-x-2 text-gray-700",e.innerHTML=`
                <span class="font-semibold text-indigo-700">${s.rank}. ${s.infinitive}</span>
                <!--<span class="text-gray-500">(${s.translation})</span>-->
                <span class="text-sm text-gray-400">— ${s.frequency_note}</span>
            `,g.appendChild(e)});const n=t.conjugation_patterns_summary;o.innerHTML=`<span class="font-semibold">Nombre total de modèles :</span> ${n.total_patterns}`,i.innerHTML=`<span class="font-semibold">Le plus courant :</span> ${n.most_common_pattern}`,m.innerHTML=`<span class="font-semibold">Les plus irréguliers :</span> ${n.most_irregular}`,_.innerHTML=`<span class="font-semibold">Les plus faciles à apprendre :</span> ${n.easiest_to_learn}`,n.notes.forEach(s=>{const e=document.createElement("li");e.textContent=s,e.className="text-gray-700",L.appendChild(e)})}function I(t){const n=document.createElement("div");n.className="group-box bg-gradient-to-r from-indigo-600 to-purple-600 text-white cursor-pointer rounded-xl shadow-lg border border-gray-200 overflow-x-hidden";const s=document.createElement("div");s.className="w-full p-4 text-left flex justify-between items-center text-white font-bold text-xl rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75",s.setAttribute("aria-expanded","false"),s.setAttribute("aria-controls",`content-${t.name.replace(/\s+/g,"-")}`),s.innerHTML=`
            <div>
                <h2 class="md:text-2xl text-sm">${t.name}</h2>
                <p class="text-base font-normal opacity-90">${t.pattern}</p>
                <span class="text-sm font-normal opacity-80">${t.verbs.length} verbes</span>
            </div>
            <svg class="w-6 h-6 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        `;const e=document.createElement("div");return e.id=`content-${t.name.replace(/\s+/g,"-")}`,e.className="max-h-0 opacity-0 overflow-x-hidden transition-all duration-500 ease-in-out",t.verbs.forEach(r=>{const l=B(r);e.appendChild(l)}),s.addEventListener("click",()=>{const r=s.getAttribute("aria-expanded")==="true";s.setAttribute("aria-expanded",!r),s.querySelector("svg").classList.toggle("rotate-180",!r),r?(e.classList.remove("max-h-none","opacity-100"),e.classList.add("max-h-0","opacity-0"),e.style.padding="0"):(e.classList.remove("max-h-0","opacity-0"),e.classList.add("max-h-none","opacity-100"),e.style.padding="1rem")}),n.appendChild(s),n.appendChild(e),n}function B(t){const n=document.createElement("div");return n.id=t.infinitive,n.className="grid gap-2 bg-white rounded-lg p-4 shadow-sm border border-gray-100 mb-4 last:mb-0",n.setAttribute("data-infinitive",t.infinitive),n.innerHTML=`
            <div class="flex justify-between items-start">
                <h3 class="text-lg font-semibold text-gray-800 pr-2">${t.infinitive}</h3>
                <span class="text-sm text-gray-500">${t.verbes_du_type||""}</span>
            </div>
            <div>
            <span class="text-sm text-blue-800">${t.justification||""}</span>
            </div>
            <div class="space-y-2">
                    <h4 class="text-sm md:text-base font-medium text-gray-600">Présent</h4>
                    <div class="grid grid-rows-3 grid-cols-2 md:grid-cols-3 gap-2 grid-flow-col">
                        ${Object.entries(t.present_tense).map(([s,e])=>`
                            <div class="text-sm md:text-base text-gray-700 flex items-start">
                                <div class="font-medium min-w-14">${s}<span>:</span></div>
                                <div class="ml-1 text-blue-900 font-bold">${e}</div>
                            </div>
                        `).join("")}
                    </div>
            </div>
        `,n}V()});
